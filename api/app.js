// use visibility for the calculations